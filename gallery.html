<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Galeria - PDR PRIMO</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css"/>
    <link rel="stylesheet" href="twentytwenty.css"/>
    <link rel="stylesheet" href="ReturnUp.css">
    <script src="ReturnUp.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="jquery.event.move.js"></script>
    <script src="jquery.twentytwenty.js"></script>
</head>
<body>
<div id="header"></div>
<h3 class="glossy">Portfolio</h3>
<section class="section">
    <div class="gallery-container">
        <!-- Kontener twenty-twenty dla pierwszej pary zdjęć -->
        <div class="twenty-twenty-container">
            <img src="Gallery/z1przed.png" alt="Zdjęcie 1 przed" />
            <img src="Gallery/z1po.png" alt="Zdjęcie 1 po" />
        </div>
        
        <!-- Kontener twenty-twenty dla drugiej pary zdjęć -->
        <div class="twenty-twenty-container">
            <img src="Gallery/z2przed.png" alt="Zdjęcie 2 przed" />
            <img src="Gallery/z2po.png" alt="Zdjęcie 2 po" />
        </div>
        
        <!-- Kontener twenty-twenty dla trzeciej pary zdjęć -->
        <div class="twenty-twenty-container">
            <img src="Gallery/z3przed.png" alt="Zdjęcie 3 przed" />
            <img src="Gallery/z3po.png" alt="Zdjęcie 3 po" />
        </div>
    </div>
</section>
<button id="scrollToTopBtn" class="btn glossy" onclick="scrollToTop()" aria-label="Powrót na górę">
    <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="#ffd700" viewBox="0 0 256 256" class="icon-gold">
        <path d="M208,80v88a64,64,0,0,1-128,0V51.31L45.66,85.66A8,8,0,0,1,34.34,74.34l48-48a8,8,0,0,1,11.32,0l48,48a8,8,0,0,1-11.32,11.32L96,51.31V168a48,48,0,0,0,96,0V80a8,8,0,0,1,16,0Z"></path>
    </svg>
</button>
<div id="footer"></div>
<script src="main.js"></script>
<script>
    $(document).ready(function() {
        console.log('Inicjalizacja galerii...');
        
        // Sprawdzenie czy biblioteki są załadowane
        console.log('Sprawdzanie bibliotek jQuery...');
        console.log('jQuery version:', $.fn.jquery);
        console.log('Dostępne biblioteki jQuery:', Object.keys($.fn));
        
        if (typeof $.fn.twentytwenty === 'undefined') {
            console.error('Biblioteka twentytwenty nie jest załadowana!');
            
            // Sprawdzenie czy pliki są załadowane
            console.log('Sprawdzanie czy pliki są załadowane...');
            var scripts = document.getElementsByTagName('script');
            for (var i = 0; i < scripts.length; i++) {
                console.log('Script', i, ':', scripts[i].src);
            }
            
            return;
        }
        
        console.log('Biblioteka twentytwenty jest dostępna');
        
        // Sprawdzenie czy kontenery istnieją
        var containers = $(".twenty-twenty-container");
        console.log('Znaleziono kontenerów:', containers.length);
        
        if (containers.length === 0) {
            console.error('Nie znaleziono kontenerów twenty-twenty!');
            console.log('Dostępne elementy z klasą twenty-twenty:', $('[class*="twenty-twenty"]').length);
            return;
        }
        
        // Sprawdzenie czy wszystkie obrazy są załadowane
        var images = containers.find('img');
        var loadedImages = 0;
        var totalImages = images.length;
        
        console.log('Ładowanie obrazów:', totalImages);
        
        if (totalImages === 0) {
            console.error('Nie znaleziono obrazów w kontenerach!');
            console.log('Struktura kontenerów:');
            containers.each(function(index) {
                console.log('Kontener', index + 1, ':', this.outerHTML);
            });
            return;
        }
        
        images.each(function(index) {
            var img = $(this);
            console.log('Sprawdzanie obrazu', index + 1, ':', img.attr('src'));
            
            if (img[0].complete && img[0].naturalWidth > 0) {
                loadedImages++;
                console.log('Obraz załadowany:', img.attr('src'));
            } else {
                img.on('load', function() {
                    loadedImages++;
                    console.log('Obraz załadowany:', img.attr('src'));
                    
                    if (loadedImages === totalImages) {
                        console.log('Wszystkie obrazy załadowane, inicjalizacja sliderów...');
                        initializeSliders();
                    }
                });
                
                img.on('error', function() {
                    console.error('Błąd ładowania obrazu:', img.attr('src'));
                });
            }
        });
        
        // Jeśli wszystkie obrazy są już załadowane
        if (loadedImages === totalImages) {
            console.log('Wszystkie obrazy już załadowane, inicjalizacja sliderów...');
            initializeSliders();
        }
        
        function initializeSliders() {
            try {
                console.log('Rozpoczynanie inicjalizacji sliderów...');
                
                // Sprawdzenie czy kontenery mają obrazy
                containers.each(function(index) {
                    var container = $(this);
                    var imgs = container.find('img');
                    console.log('Kontener', index + 1, 'ma', imgs.length, 'obrazów');
                    imgs.each(function(imgIndex) {
                        var img = $(this);
                        console.log('  Obraz', imgIndex + 1, ':', img.attr('src'), 'wymiary:', img[0].naturalWidth, 'x', img[0].naturalHeight);
                    });
                });
                
                // Inicjalizacja kontenerów twenty-twenty
                containers.twentytwenty({
                    default_offset_pct: 0.5,
                    orientation: 'horizontal',
                    before_label: 'PRZED',
                    after_label: 'PO',
                    no_overlay: false
                });
                
                console.log('Kontenery zainicjalizowane');
                
                // Dodanie logo PDR do uchwytów slidera
                setTimeout(function() {
                    var handles = $(".twentytwenty-handle");
                    console.log('Znaleziono uchwytów:', handles.length);
                    
                    handles.each(function() {
                        if ($(this).find('img').length === 0) {
                            $(this).append('<img src="Gallery/LOGO1PDR.png" alt="logo" style="width:72px;height:72px;border-radius:50%;object-fit:contain;z-index:2;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);box-shadow:0 4px 20px #003a1d88,0 0 16px #ffd70055 inset;pointer-events:none;" />');
                        }
                    });
                    
                    console.log('Logo dodane do uchwytów');
                }, 400);
            } catch (error) {
                console.error('Błąd podczas inicjalizacji sliderów:', error);
                console.error('Stack trace:', error.stack);
            }
        }
    });
</script>
</body>
</html> 